// Generated by CoffeeScript 1.7.1
;define('slip', function (){
return (function(q){var l,u,r,v,n,B,w,C,s,x,y,D,E,z,o;n=null;l=["webkit","moz","ms","o",""];B=/\-?[0-9]+\.?[0-9]*/g;w=(r="ontouchend"in q)?"touchstart":"mousedown";v=r?"touchmove":"mousemove";u=r?"touchend":"mouseup";s=q.innerHeight;x=q.innerWidth;E=function(){};z=function(f,g){var h,a,b,c;c=[];a=0;for(b=l.length;a<b;a++){h=(h=l[a])?""+h+"Transition":"transition";c.push(f.style[h]=g)}return c};o=function(f,g,h,a){var b,c,d,e;e=[];c=0;for(d=l.length;c<d;c++){b=(b=l[c])?""+b+"Transform":"transform";e.push(f.style[b]=
"translate3d("+(g||0)+"px, "+(h||0)+"px, "+(a||0)+"px)")}return e};D=function(f){var g,h,a,b;h=[];a=0;for(b=l.length;a<b;a++){g=(g=l[a])?""+g+"Transform":"transform";if((g=f.style[g])&&typeof g==="string"){h=(f=g.match(/\((.*)\)/g)[0])&&f.match(B);break}}if(h.length)return{x:h[0]||0,y:h[1]||0,z:h[2]||0}};C=function(){function f(a,b){this.ele=a;this.direction=b;this._isPressed=false;this.onStart=this.onMove=this.onEnd=E;this.coord=this.eventCoords=this.cacheCoords=this.finger=this.absFinger=n;this.orient=
[];this.isWebapp=this.isSlider=false;this.duration="400"}var g,h;h=[function(a){var b;b=a.touches&&(a.touches.length?a.touches:[a]);a=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:a.clientX,y:a.clientY}},function(a){return{x:a.clientX,y:a.clientY}}];g=r?h[0]:h[1];f.prototype.start=function(a){return(this.onStart=a)&&this};f.prototype.move=function(a){return(this.onMove=a)&&this};f.prototype.end=
function(a){return(this.onEnd=a)&&this};f.prototype.setCoord=function(a){var b,c;a=this.coord={x:a.x||0,y:a.y||0};c=this.ele;o(c,a.x,a.y);for(b in a)c.setAttribute(b,a[b]);return this};f.prototype.onTouchStart=function(a){this._isPressed=true;this.eventCoords=g(a);this.cacheCoords=this.coord;this.finger=this.absFinger=n;this.isSlider&&this.onSliderStart(a);return this.onStart.apply(this,[a])};f.prototype.onTouchMove=function(a){var b,c,d,e,i;a.preventDefault();if(!this._isPressed)return false;e=g(a);
d=this.direction;e=this.finger={x:e.x-this.eventCoords.x,y:e.y-this.eventCoords.y};b=this.absFinger={x:Math.abs(e.x),y:Math.abs(e.y)};if(d!=="xy"){i=d==="x"?"y":"x";if(b[d]<10||b[i]>40)return false}i=[];if(b.x>10)i.push(e.x<0?"left":"right");if(b.y>10)i.push(e.y<0?"up":"down");this.orient=i;if(this.onMove.apply(this,[a])===false)return false;a=this.ele;d=this.coord={x:d.indexOf("x")<0?this.cacheCoords.x:this.cacheCoords.x-0+e.x,y:d.indexOf("y")<0?this.cacheCoords.y:this.cacheCoords.y-0+e.y};o(a,d.x,
d.y);e=[];for(c in d)e.push(a.setAttribute(c,d[c]));return e};f.prototype.onTouchEnd=function(a){this._isPressed=false;this.isSlider&&this.onSliderEnd(a);(a=D(this.ele))&&this.setCoord(a);return this.orient=[]};f.prototype.onSliderStart=function(){return z(this.ele,n)};f.prototype.onSliderEnd=function(a,b){var c,d,e,i,k,m,F,t,p,j,A;if(b==null)b={};p=b.jumpPage;m=this.orient.join("");k=false;j=this.page;A=this.pageNum;b=this.ele;d=this.duration;c=this.absFinger;F=m.indexOf("up")>-1;e=m.indexOf("down")>
-1;i=m.indexOf("left")>-1;m=m.indexOf("right")>-1;t=this.direction==="y";if(p!==void 0)j=p;else if(t){F&&j++;e&&j--}else{i&&j++;m&&j--}if(j>=A){j=A-1;k=true}if(j<0){j=0;k=true}if(k===true&&!p)d*=t?c.y/this.pageHeight:c.x/this.pageWidth;z(b,"all "+d+"ms ease-in");if(t){c="-"+j*this.pageHeight;o(b,0,c,0)}else{c="-"+j*this.pageWidth;o(b,c,0,0)}this.page=j;p&&this.onTouchEnd.call(this,n);this.onEnd.apply(this,[a]);return this};f.prototype.init=function(){var a,b,c,d,e;this.coord={x:0,y:0};e=this._onTouchStart=
function(i){return function(k){return i.onTouchStart(k)}}(this);d=this._onTouchMove=function(i){return function(k){return i.onTouchMove(k)}}(this);c=this._onTouchEnd=function(i){return function(k){return i.onTouchEnd(k)}}(this);b=this.ele;b.addEventListener(w,e,false);b.addEventListener(v,d,false);b.addEventListener(u,c,false);c=this.coord={x:0,y:0};o(b,c.x,c.y);for(a in c)b.setAttribute(a,c[a]);return this};f.prototype.destroy=function(){var a;a=this.ele;a.removeEventListener(w,this._onTouchStart,
false);a.removeEventListener(v,this._onTouchMove,false);a.removeEventListener(u,this._onTouchEnd,false);return this};f.prototype.slider=function(a){var b,c,d,e;b=this.ele;if(typeof a==="string")a=b.querySelectorAll(a);else if(!a){a=[];c=b.childNodes;d=0;for(e=c.length;d<e;d++){b=c[d];b.nodeType===1&&a.push(b)}}this.isSlider=true;this.page=0;this.elPages=a;this.pageNum=(b=a.length)?b:0;if(this.direction==="x"){c=0;for(d=a.length;c<d;c++){b=a[c];b.style.cssFloat="left"}}return this};f.prototype.webapp=
function(a){this.isWebapp=true;this.slider(a).fullscreen();this.ele.style.height=""+s*this.pageNum+"px";this.height(s);this.direction==="x"&&this.width(x);return this};f.prototype.height=function(a){var b,c,d,e;b=this.ele;c=this.elPages;a=String(a).replace("px","");if(a==="100%")a=s;this.pageHeight=a;if(this.direction==="x")b.style.height=""+a+"px";d=0;for(e=c.length;d<e;d++){b=c[d];b.style.height=""+a+"px"}return this};f.prototype.width=function(a){var b,c,d,e;b=this.ele;c=this.elPages;d=this.pageNum;
a=String(a).replace("px","");if(a==="100%")a=x;this.pageWidth=a;if(this.direction==="x")b.style.width=""+a*d+"px";d=0;for(e=c.length;d<e;d++){b=c[d];b.style.width=""+a+"px"}return this};f.prototype.fullscreen=function(){var a;for(a=this.ele;a=a.parentNode;){if(a.nodeType===1){a.style.height="100%";a.style.overflow="hidden"}a=a}return this};f.prototype.time=function(a){this.duration=String(a).replace("ms","");return this};f.prototype.jump=function(a){this.onSliderEnd(n,{jumpPage:a});return this};return f}();
y=function(f,g){return(new C(f,g||"x")).init()};return y;})(window,document);
});